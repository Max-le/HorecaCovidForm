{% extends "layout.html" %}


{% block body %}
<h3>Formulaire de tracing COVID-19</h3>
<p>Suite aux décisions du Conseil National de Sécurité, cet établissment à l'obligation récolter les coordonnées de leurs clients.</p>
<p>L'établissement doit conserver ces données pendant 14 jours, après quoi elle seront supprimées.</p>
<p>Vous êtes gérant de l'établissement ? Accéder à la page admin <a href="/admin">ici</a>.</p>
<form action="/form" method="post">
    <div class="form-group">
      <label for="email">Adresse mail</label>
      <input type="email" name="email" class="form-control" id="email" aria-describedby="emailHelp">
    </div>

    <div class="form-group">
      <label for="tel">Téléphone</label>
      <input type="tel" name="tel" class="form-control" id="email" aria-describedby="emailHelp">
    </div>

    <div class="form-group">
      <label for="firstName">Prénom</label>
      <input type="text" name="firstName" class="form-control" id="firstName">
    </div>
    <div class="form-group">
      <label for="lastName">Nom</label>
      <input type="text" name="lastName" class="form-control" id="lastName">
    </div>

    <div class="form-group">
      <label for="dateVisit">Date de visite</label>
      <input type="date" name="dateVisit" class="form-control" id="dateVisit"  readonly>
    </div>

    <div class="form-group">
      <label for="hourVisit">Heure d'arrivée</label>
      <input type="time" name="hourVisit" class="form-control" id="hourVisit" readonly>
    </div>
    
    <button type="submit" class="btn btn-primary">Valider</button>
  </form>

  <script>
      function addZero(i) {
        if (i < 10) {
          i = "0" + i;
        }
        return i;
      }

      var now = new Date();

      document.querySelector("#dateVisit").valueAsDate = now;  

      var h = addZero(now.getHours());
      var m = addZero(now.getMinutes());

      let currentTime = h + ":" + m;
      console.log("It is "+currentTime)
      document.querySelector("#hourVisit").value = currentTime ;
  </script>
  {% endblock %}